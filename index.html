<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Cash Tally Pro</title>
    <style>
        :root { --p: #0f172a; --a: #3b82f6; --bg: #f8fafc; --s: #10b981; }

        /* General Reset */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background: var(--bg); 
            margin: 0; 
            padding-bottom: env(safe-area-inset-bottom, 120px);
            color: #1e293b;
            overflow-x: hidden;
        }

        /* Portrait vs Landscape optimization */
        @media (orientation: landscape) {
            .container { max-width: 90%; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
            .section-divider { grid-column: span 2; }
        }

        header { 
            background: var(--p); 
            color: white; 
            padding: 15px 20px; 
            position: sticky; 
            top: 0; 
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .currency-selector { 
            width: 65%; 
            padding: 10px; 
            border-radius: 8px; 
            background: white; 
            font-weight: bold;
            font-size: 0.9rem;
        }

        .rotate-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px;
            border-radius: 6px;
            display: none; /* Only show in fullscreen */
        }

        .container { max-width: 500px; margin: 0 auto; padding: 10px; transition: all 0.3s ease; }

        .section-divider { 
            padding: 15px 5px 5px; 
            font-size: 0.7rem; 
            font-weight: 800; 
            color: #64748b; 
            text-transform: uppercase; 
            letter-spacing: 1px;
        }

        .cash-row { 
            background: white; 
            border-radius: 12px; 
            padding: 12px 15px; 
            margin-bottom: 8px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .denom-label { display: flex; align-items: center; gap: 12px; }

        .denom-visual { 
            width: 50px; height: 32px; 
            background: #f1f5f9; 
            border: 2px solid #cbd5e1; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 0.7rem; font-weight: 800; border-radius: 6px; 
        }

        .visual-coin { border-radius: 50%; width: 38px; height: 38px; }

        .input-box { 
            width: 85px; padding: 12px; 
            border: 2px solid #cbd5e1; 
            border-radius: 10px; 
            font-size: 1.2rem; 
            text-align: center; 
            font-weight: 800;
            background: #fff;
        }

        .row-total { 
            display: block; font-size: 0.8rem; 
            color: #64748b; text-align: right; 
            margin-top: 4px; font-family: monospace; 
        }

        /* Footer */
        .footer-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: #ffffff; border-top: 1px solid #e2e8f0;
            padding: 15px 20px; display: flex;
            justify-content: space-between; align-items: center;
            z-index: 2000;
        }

        .total-amount { font-size: 1.8rem; font-weight: 900; color: var(--s); }

        /* Fullscreen Controls */
        .fs-btn {
            position: fixed; bottom: 85px; right: 20px;
            background: var(--p); color: white;
            width: 45px; height: 45px; border-radius: 50%;
            border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            display: flex; align-items: center; justify-content: center;
            z-index: 2001; font-size: 1.2rem;
        }

        /* Handle Fullscreen Display */
        :fullscreen body { padding-top: 20px; }
        :-webkit-full-screen body { padding-top: 20px; }
    </style>
</head>
<body>

<header id="appHeader">
    <select id="currencySelect" class="currency-selector" onchange="changeCurrency()"></select>
    <button class="rotate-btn" id="rotateBtn" onclick="toggleRotation()">ðŸ”„ Flip</button>
</header>

<div id="appContainer" class="container"></div>

<button class="fs-btn" onclick="toggleFS()" id="fsToggle">â›¶</button>

<div class="footer-bar">
    <div>
        <div style="font-size: 0.6rem; font-weight: 900; color: #64748b;">GRAND TOTAL</div>
        <div id="grandTotal" class="total-amount">0.00</div>
    </div>
    <button style="background:#fee2e2; border:none; color:#dc2626; padding:12px 20px; border-radius:10px; font-weight:bold;" onclick="resetAll()">Reset</button>
</div>

<script>
    const currencies = {
        "AUD": { n: "Australia", s: "$", d: [{l: "$100", v: 100, t: 'note'}, {l: "$50", v: 50, t: 'note'}, {l: "$20", v: 20, t: 'note'}, {l: "$10", v: 10, t: 'note'}, {l: "$5", v: 5, t: 'note'}, {l: "$2", v: 2, t: 'coin'}, {l: "$1", v: 1, t: 'coin'}, {l: "50c", v: 0.5, t: 'coin'}, {l: "20c", v: 0.2, t: 'coin'}, {l: "10c", v: 0.1, t: 'coin'}, {l: "5c", v: 0.05, t: 'coin'}]},
        "USD": { n: "USA", s: "$", d: [{l: "$100", v: 100, t: 'note'}, {l: "$50", v: 50, t: 'note'}, {l: "$20", v: 20, t: 'note'}, {l: "$10", v: 10, t: 'note'}, {l: "$5", v: 5, t: 'note'}, {l: "$2", v: 2, t: 'note'}, {l: "$1", v: 1, t: 'note'}, {l: "50Â¢", v: 0.5, t: 'coin'}, {l: "25Â¢", v: 0.25, t: 'coin'}, {l: "10Â¢", v: 0.1, t: 'coin'}, {l: "5Â¢", v: 0.05, t: 'coin'}, {l: "1Â¢", v: 0.01, t: 'coin'}]},
        "EUR": { n: "Europe", s: "â‚¬", d: [{l: "â‚¬500", v: 500, t: 'note'}, {l: "â‚¬200", v: 200, t: 'note'}, {l: "â‚¬100", v: 100, t: 'note'}, {l: "â‚¬50", v: 50, t: 'note'}, {l: "â‚¬20", v: 20, t: 'note'}, {l: "â‚¬10", v: 10, t: 'note'}, {l: "â‚¬5", v: 5, t: 'note'}, {l: "â‚¬2", v: 2, t: 'coin'}, {l: "â‚¬1", v: 1, t: 'coin'}, {l: "50c", v: 0.5, t: 'coin'}, {l: "20c", v: 0.2, t: 'coin'}, {l: "10c", v: 0.1, t: 'coin'}, {l: "5c", v: 0.05, t: 'coin'}, {l: "2c", v: 0.02, t: 'coin'}, {l: "1c", v: 0.01, t: 'coin'}]},
        "GBP": { n: "UK", s: "Â£", d: [{l: "Â£50", v: 50, t: 'note'}, {l: "Â£20", v: 20, t: 'note'}, {l: "Â£10", v: 10, t: 'note'}, {l: "Â£5", v: 5, t: 'note'}, {l: "Â£2", v: 2, t: 'coin'}, {l: "Â£1", v: 1, t: 'coin'}, {l: "50p", v: 0.5, t: 'coin'}, {l: "20p", v: 0.2, t: 'coin'}, {l: "10p", v: 0.1, t: 'coin'}, {l: "5p", v: 0.05, t: 'coin'}, {l: "2p", v: 0.02, t: 'coin'}, {l: "1p", v: 0.01, t: 'coin'}]},
        "MYR": { n: "Malaysia", s: "RM", d: [{l: "100", v: 100, t: 'note'}, {l: "50", v: 50, t: 'note'}, {l: "20", v: 20, t: 'note'}, {l: "10", v: 10, t: 'note'}, {l: "5", v: 5, t: 'note'}, {l: "1", v: 1, t: 'note'}, {l: "50s", v: 0.5, t: 'coin'}, {l: "20s", v: 0.2, t: 'coin'}, {l: "10s", v: 0.1, t: 'coin'}, {l: "5s", v: 0.05, t: 'coin'}]},
        "PHP": { n: "Philippines", s: "â‚±", d: [{l: "1000", v: 1000, t: 'note'}, {l: "500", v: 500, t: 'note'}, {l: "100", v: 100, t: 'note'}, {l: "50", v: 50, t: 'note'}, {l: "20", v: 20, t: 'note'}, {l: "20", v: 20, t: 'coin'}, {l: "10", v: 10, t: 'coin'}, {l: "5", v: 5, t: 'coin'}, {l: "1", v: 1, t: 'coin'}, {l: "25Â¢", v: 0.25, t: 'coin'}]},
        "JPY": { n: "Japan", s: "Â¥", d: [{l: "10000", v: 10000, t: 'note'}, {l: "5000", v: 5000, t: 'note'}, {l: "1000", v: 1000, t: 'note'}, {l: "500", v: 500, t: 'coin'}, {l: "100", v: 100, t: 'coin'}, {l: "50", v: 50, t: 'coin'}, {l: "10", v: 10, t: 'coin'}, {l: "5", v: 5, t: 'coin'}, {l: "1", v: 1, t: 'coin'}]},
        "AED": { n: "UAE", s: "DH", d: [{l: "1000", v: 1000, t: 'note'}, {l: "500", v: 500, t: 'note'}, {l: "100", v: 100, t: 'note'}, {l: "50", v: 50, t: 'note'}, {l: "20", v: 20, t: 'note'}, {l: "10", v: 10, t: 'note'}, {l: "1DH", v: 1, t: 'coin'}, {l: "50f", v: 0.5, t: 'coin'}, {l: "25f", v: 0.25, t: 'coin'}]},
        "HKD": { n: "Hong Kong", s: "HK$", d: [{l: "1000", v: 1000, t: 'note'}, {l: "100", v: 100, t: 'note'}, {l: "50", v: 50, t: 'note'}, {l: "20", v: 20, t: 'note'}, {l: "10", v: 10, t: 'note'}, {l: "10", v: 10, t: 'coin'}, {l: "5", v: 5, t: 'coin'}, {l: "2", v: 2, t: 'coin'}, {l: "1", v: 1, t: 'coin'}, {l: "50Â¢", v: 0.5, t: 'coin'}]},
        "SEK": { n: "Sweden", s: "kr", d: [{l: "1000", v: 1000, t: 'note'}, {l: "500", v: 500, t: 'note'}, {l: "100", v: 100, t: 'note'}, {l: "50", v: 50, t: 'note'}, {l: "20", v: 20, t: 'note'}, {l: "10", v: 10, t: 'coin'}, {l: "5", v: 5, t: 'coin'}, {l: "1", v: 1, t: 'coin'}]}
    };

    let counts = {}, curKey = "AUD";

    function boot() {
        const sel = document.getElementById('currencySelect');
        for (let k in currencies) {
            const o = document.createElement('option');
            o.value = k; o.textContent = currencies[k].n;
            sel.appendChild(o);
        }
        changeCurrency();
        
        // Handle "Back" Button gesture to exit Fullscreen
        window.addEventListener('popstate', () => {
            if (document.fullscreenElement) document.exitFullscreen();
        });
    }

    function toggleFS() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            history.pushState({fs: true}, ""); // Add state for back button
            document.getElementById('rotateBtn').style.display = 'block';
        } else {
            document.exitFullscreen();
        }
    }

    // Monitor FS changes
    document.onfullscreenchange = () => {
        if (!document.fullscreenElement) {
            document.getElementById('rotateBtn').style.display = 'none';
        }
    };

    function toggleRotation() {
        if (screen.orientation) {
            const type = screen.orientation.type.includes('portrait') ? 'landscape' : 'portrait';
            screen.orientation.lock(type).catch(() => {
                alert("Please enable Auto-Rotate in your phone settings.");
            });
        }
    }

    function changeCurrency() {
        curKey = document.getElementById('currencySelect').value;
        counts = {};
        render();
    }

    function render() {
        const cont = document.getElementById('appContainer');
        cont.innerHTML = '';
        const data = currencies[curKey];
        let lastT = '';

        data.d.forEach((item, idx) => {
            if (item.t !== lastT) {
                const head = document.createElement('div');
                head.className = 'section-divider';
                head.textContent = item.t + 's';
                cont.appendChild(head);
                lastT = item.t;
            }
            const row = document.createElement('div');
            row.className = 'cash-row';
            row.innerHTML = `
                <div class="denom-label">
                    <div class="denom-visual ${item.t === 'coin' ? 'visual-coin' : ''}">${item.l}</div>
                    <span style="font-weight:700">${item.l}</span>
                </div>
                <div>
                    <input type="number" class="input-box" placeholder="0" oninput="update(${idx}, this.value)" inputmode="numeric">
                    <span class="row-total" id="row-t-${idx}">${data.s}0.00</span>
                </div>`;
            cont.appendChild(row);
        });
        updateTotal();
    }

    function update(idx, val) {
        counts[idx] = parseFloat(val) || 0;
        const item = currencies[curKey].d[idx];
        document.getElementById(`row-t-${idx}`).textContent = format(counts[idx] * item.v);
        updateTotal();
    }

    function updateTotal() {
        let total = 0;
        currencies[curKey].d.forEach((item, i) => total += (counts[i] || 0) * item.v);
        document.getElementById('grandTotal').textContent = format(total);
    }

    function format(n) {
        const s = currencies[curKey].s;
        const d = (curKey === "JPY" || curKey === "SEK") ? 0 : 2;
        return s + n.toLocaleString(undefined, {minimumFractionDigits: d, maximumFractionDigits: d});
    }

    function resetAll() { if(confirm("Reset all?")) { counts = {}; render(); } }

    window.onload = boot;
</script>
</body>
</html>
Pro-Tips for your OnePlus Nord 3:
Add to Home Screen: Open this file in Chrome on your phone, tap the 3 dots (menu) at the top right, and select "Add to Home screen." It will now appear like a real app on your app drawer!

Back Gesture: If you use the swipe-from-side gesture to go back, the app is coded to exit Fullscreen first. Swipe again to actually close the app.

Landscape: The app will automatically split into two columns when you turn your phone sideways to make the most of that wide OnePlus screen.
